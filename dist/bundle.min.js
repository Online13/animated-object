function t(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)}function e(t,e,n,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(t,n):s?s.value=n:e.set(t,n),n}var n,i,s,a;class o extends HTMLElement{constructor(){super(),n.set(this,void 0),i.set(this,void 0),s.set(this,void 0),a.set(this,void 0),this.target=[],this.props=[],e(this,a,"","f"),this.container=null,this.delay=100,this.animation="",e(this,n,!1,"f"),e(this,s,!1,"f");this.observer=new IntersectionObserver(this.callback.bind(this),{threshold:.6,rootMargin:"0px"}),e(this,i,0,"f"),this.attribute(),this.onIntersecting=this.onIntersecting.bind(this),this.onUnintersecting=this.onUnintersecting.bind(this)}static addAnimation(t){let e={name:t.name,timing:t.timing,duration:t.duration,keyframe:t.keyframe};o.ANIMATIONS[t.selector]?o.ANIMATIONS[t.selector].push(e):o.ANIMATIONS[t.selector]=[e]}connectedCallback(){this.prerender(),this.styling(),this.render(),t(this,s,"f")?this.observe():this.onIntersecting()}attribute(){const i=this.getAttributeNames();for(const a of i){let i=this.getAttribute(a);switch(a){case"delay":this.delay=Number(i),this.delay=isNaN(this.delay)?300:this.delay;break;case"animation":this.animation=i;break;case"once":e(this,n,null!==i,"f");break;case"follow":e(this,s,null!==i||t(this,n,"f"),"f");break;case"as":this.container=document.createElement(i);break;case"class":null===this.container?this.className=i:this.container.className=i;break;default:this.props.push(a)}}this.props.forEach((t=>{this.container&&this.container.setAttribute(t,this.getAttribute(t))}))}styling(){const n=o.ANIMATIONS[this.tagName];n&&n.forEach((n=>{const i=o.DEFAULT_ANIMATION[this.tagName]||{};o.DEFAULT_ANIMATION[this.tagName]=Object.assign(Object.assign({},i),{[n.name]:`default__${n.name}`}),e(this,a,t(this,a,"f")+`\n\n                    @keyframes ${n.name} {\n                        from {\n                            ${n.keyframe.from}\n                        } to {\n                            ${n.keyframe.to}\n                        }\n                    }\n\n                    @keyframes stop-${n.name} {\n                        from {\n                            ${n.keyframe.to}\n                        } to {\n                            ${n.keyframe.from}\n                        }\n                    }\n\n                    .${n.name} {\n                        animation: ${n.name} ${n.duration}ms ${n.timing} both !important;\n                    }\n                    .default__${n.name} {\n                        animation: stop-${n.name} ${n.duration}ms ${n.timing} both;\n                    }\n                `,"f")}));const i=document.createElement("style");i.innerHTML=t(this,a,"f"),this.appendChild(i)}callback(s,a){s.forEach((s=>{var a;s.isIntersecting?this.onIntersecting():t(this,n,"f")&&t(this,i,"f")<1?(this.onUnintersecting(),e(this,i,(a=t(this,i,"f"),++a),"f"),this.observer.unobserve(s.target)):t(this,n,"f")||this.onUnintersecting()}))}prerender(){null!==this.container&&(Array.from(this.childNodes).forEach((t=>{var e;this.removeChild(t),null===(e=this.container)||void 0===e||e.append(t)})),this.appendChild(this.container))}}n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,o.ANIMATIONS={},o.DEFAULT_ANIMATION={};class r extends o{constructor(){super(),this.velocity=300,this.key_count=0,this.loop=this.loop.bind(this),this.spanify=this.spanify.bind(this)}observe(){this.observer.observe(this)}onIntersecting(){this.target.forEach((t=>{t.classList.add(this.animation)}))}onUnintersecting(){this.target.forEach((t=>{t.classList.remove(this.animation)}))}render(){this.loop(this.container||this)}loop(t){let e=[];return t.childNodes.forEach((t=>{var n;if(t.nodeType===Node.TEXT_NODE){const i=null===(n=t.textContent)||void 0===n?void 0:n.split(" "),s=null==i?void 0:i.map((t=>this.spanify(t,this.key_count++))),a=null==s?void 0:s.reduce(((t,e)=>t.concat([e,document.createTextNode(" ").cloneNode()])),[]);e=e.concat(a)}else"STYLE"!==t.nodeName&&("BR"!==t.nodeName&&this.loop(t),e.push(t))})),t.innerHTML="",e.forEach((e=>{t.appendChild(e)})),e}spanify(t,e){const n=document.createElement("span");Object.assign(n.style,{display:"inline-block",overflow:"hidden"});const i=document.createElement("span");return i.style.setProperty("display","block"),i.style.setProperty("animation-delay",this.delay*e+this.velocity+"ms","important"),i.classList.add(o.DEFAULT_ANIMATION[this.tagName][this.animation]),this.target.push(i),i.textContent=t,n.appendChild(i),n}}o.addAnimation({selector:"text-animate".toLocaleUpperCase(),name:"text-to-top",timing:"ease-out",duration:400,keyframe:{from:"transform: translateY(200%);",to:"transform: translateY(0%);"}}),customElements.define("text-animate",r),window.animateObject={AnimatedObject:o,TextAnimate:r};export{o as AnimatedObject,r as TextAnimate};
//# sourceMappingURL=bundle.min.js.map
